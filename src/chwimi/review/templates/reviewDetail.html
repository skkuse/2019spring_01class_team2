{% extends 'base.html' %}
{% load staticfiles %}

{% block extra-style %}
<style>
    body{ background: #fafafa;}
    .widget-area.blank {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    -ms-box-shadow: none;
    -o-box-shadow: none;
    box-shadow: none;
    }
    body .no-padding {
    padding: 0;
    }
    .widget-area {
    background-color: #fff;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    -ms-border-radius: 4px;
    -o-border-radius: 4px;
    border-radius: 4px;
    -webkit-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05);
    -ms-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05);
    -o-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05);
    box-shadow: 0 0 16px rgba(0, 0, 0, 0.05);
    float: left;
    margin-top: 30px;
    padding: 25px 30px;
    position: relative;
    width: 100%;
    }
    .status-upload {
    background: none repeat scroll 0 0 #f5f5f5;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    -ms-border-radius: 4px;
    -o-border-radius: 4px;
    border-radius: 4px;
    float: left;
    width: 100%;
    }
    .status-upload form {
    float: left;
    width: 100%;
    }
    .status-upload form textarea {
    background: none repeat scroll 0 0 #fff;
    border: medium none;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
    -ms-border-radius: 4px 4px 0 0;
    -o-border-radius: 4px 4px 0 0;
    border-radius: 4px 4px 0 0;
    color: #777777;
    float: left;
    font-family: Lato;
    font-size: 14px;
    height: 142px;
    letter-spacing: 0.3px;
    padding: 20px;
    width: 100%;
    resize:vertical;
    outline:none;
    border: 1px solid #F2F2F2;
    }

    .status-upload ul {
    float: left;
    list-style: none outside none;
    margin: 0;
    padding: 0 0 0 15px;
    width: auto;
    }
    .status-upload ul > li {
    float: left;
    }
    .status-upload ul > li > a {
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    -ms-border-radius: 4px;
    -o-border-radius: 4px;
    border-radius: 4px;
    color: #777777;
    float: left;
    font-size: 14px;
    height: 30px;
    line-height: 30px;
    margin: 10px 0 10px 10px;
    text-align: center;
    -webkit-transition: all 0.4s ease 0s;
    -moz-transition: all 0.4s ease 0s;
    -ms-transition: all 0.4s ease 0s;
    -o-transition: all 0.4s ease 0s;
    transition: all 0.4s ease 0s;
    width: 30px;
    cursor: pointer;
    }
    .status-upload ul > li > a:hover {
    background: none repeat scroll 0 0 #606060;
    color: #fff;
    }
    .status-upload form button {
    border: medium none;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    -ms-border-radius: 4px;
    -o-border-radius: 4px;
    border-radius: 4px;
    color: #fff;
    float: right;
    font-family: Lato;
    font-size: 14px;
    letter-spacing: 0.3px;
    margin-right: 9px;
    margin-top: 9px;
    padding: 6px 15px;
    }
    .dropdown > a > span.green:before {
    border-left-color: #2dcb73;
    }
    .status-upload form button > i {
    margin-right: 7px;
    }

    .card-inner{
        margin-left: 4rem;
    }
</style>
{% endblock %}

{% block headers %}
<header class="masthead" style="background-image: url({% static 'review_main.png' %})">
    <div class="container">
        <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <div class="page-heading">
            <h1 style="color:black;">후기</h1>
            <span class="subheading" style="color:black;">여러분의 CHWIMI에 늘 귀를 기울이고 있습니다.<br></span>
            </div>
        </div>
        </div>
    </div>
</header>
{% endblock %}

{% block contents %}
<!-- 후기 란 -->
<div class="jumbotron">
    <h3 class="display-6">{{review.title}}</h3>
    <p class="lead">{{review.date}}</p>
    <p class="lead">작성자: {{review.user}}</p>
    <hr class="my-4">
    <p>상품: {{review.rate_product}} / 5</p>
    <p>배송: {{review.rate_delivery}} / 5</p>
    <p>가격: {{review.rate_price}} / 5</p>
    <hr class="my-4">
    <p>{{review.content}}</p>
    {% if review.files %}
    <img style="max-width:700px; max-height: 700px;" src="{{review.files.url}}">
    {% endif %}
</div>

<!-- 댓글 목록 란 -->
<div class="container">
    <h2 class="text-center">댓글 목록</h2>
    
    {% for cmt in comment %}
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-md-2">
                    <img src="https://image.ibb.co/jw55Ex/def_face.jpg" class="img img-rounded img-fluid"/>
                    <p class="text-secondary text-center">{{cmt.date|date:"M d, Y"}}</p>
                </div>

                <div class="col-md-10">
                    <p>
                        <strong>{{cmt.writer}}</strong>
                        <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                        <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                        <span class="float-right"><i class="text-warning fa fa-star"></i></span>
                        <span class="float-right"><i class="text-warning fa fa-star"></i></span>

                    </p>
                    <div class="clearfix">
                    </div>
                    <p>{{cmt.content}}</p>
                </div>
            </div>  
        </div>
    </div>
    {% empty %}
    <p class="text-center">댓글이 없습니다.</p>
    {% endfor %}
</div>

<br>

<!-- 댓글 입력 란 -->
{% if user.is_authenticated %}
<div style="border: 2px solid gray; padding: 20px;">
	<div class="row" style="text-align: center !important;">
		<h5 class="mx-auto">답변 달기</h5>
	</div>
    
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="widget-area no-padding blank">
                <div class="status-upload">
                    <form action="{% url 'new' review.pk %}" method="POST"> {% csrf_token %}
                        <textarea name="content" placeholder="내용을 입력해주세요" ></textarea>
                        <button type="submit" class="btn btn-success green">작성</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<br>

<a class="btn btn-outline-warning" href="{% url 'review' %}" role="button">목록으로</a>
{% endblock %}